<header>
  <h2>Experiments</h2>
</header>
<%= link_to 'New Experiment', new_research_gen_ai_experiment_path %>
<meta http-equiv="refresh" content="30">

<% if @experiments.any? %>
  <table>
    <thead>
      <tr>
        <th>ID</th>
        <th>LLM Config</th>
        <th>Passage</th>
        <th>Conjunction</th>
        <th>LLM Prompt Description</th>
        <th># of Examples</th>
        <th>Status</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <% @experiments.each do |experiment| %>
        <tr>
          <td><%= experiment.id %></td>
          <td><%= experiment.llm_config %></td>
          <td><%= experiment.passage_prompt.name %></td>
          <td><%= experiment.conjunction %></td>
          <td><%= experiment.llm_prompt.description %></td>
          <td><%= experiment.num_examples %></td>
          <td><%= experiment.status %></td>
          <td>
            <div class=link-container">
              <%= link_to "View", experiment %>
              <% if experiment.failed? %>
                <%= button_to 'Retry',
                      retry_research_gen_ai_experiment_path(experiment),
                      method: :post,
                      data: { confirm: 'Are you sure you want to retry this experiment?' },
                      class: 'link-button'
                %>
              <% end %>
            </div>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% else %>
  <p>No experiments found.</p>
<% end %>

<%= link_to 'New Experiment', new_research_gen_ai_experiment_path %>
